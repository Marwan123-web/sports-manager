{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import type { NextRequest } from \"next/server\";\nimport { NextResponse } from \"next/server\";\nimport createMiddleware from \"next-intl/middleware\";\n\nfunction getCleanPath(pathname: string): string {\n  return pathname.replace(/^\\/(en|ar|it)(\\/|$)/, \"/\");\n}\n\nconst PUBLIC_PATHS = [\n  \"/\",\n  \"/auth/login\",\n  \"/auth/register\",\n  \"/tournaments\",\n  \"/teams\",\n  \"/fields\",\n];\nconst ADMIN_PATHS = [\"/admin\"];\nconst PROTECTED_PATHS = [\"/profile\"];\n\nexport function middleware(request: NextRequest) {\n  // ✅ middleware()\n  const pathname = request.nextUrl.pathname;\n\n  // i18n first\n  const i18nResponse = createMiddleware({\n    locales: [\"en\", \"ar\", \"it\"],\n    defaultLocale: \"en\",\n  })(request);\n\n  const cleanPath = getCleanPath(pathname);\n\n  // Public\n  if (\n    PUBLIC_PATHS.some((p) => cleanPath === p || cleanPath.startsWith(p + \"/\"))\n  ) {\n    return i18nResponse; // ✅ Return i18n response\n  }\n\n  // Admin check\n  if (ADMIN_PATHS.some((p) => cleanPath.startsWith(p))) {\n    const role = request.cookies.get(\"user-role\")?.value;\n    if (role !== \"admin\") {\n      return NextResponse.redirect(new URL(\"/\", request.url));\n    }\n  }\n\n  // Protected check\n  if (PROTECTED_PATHS.some((p) => cleanPath.startsWith(p))) {\n    const token = request.cookies.get(\"auth-token\")?.value;\n    if (!token) {\n      return NextResponse.redirect(new URL(\"/auth/login\", request.url));\n    }\n  }\n\n  return i18nResponse; // ✅ Return i18n response\n}\n\nexport const config = {\n  matcher: \"/((?!api|_next|_vercel|.*\\\\..*).*)\", // ✅ Better matcher\n};\n"],"names":[],"mappings":";;;;;;AACA;AAAA;AACA;;;AAEA,SAAS,aAAa,QAAgB;IACpC,OAAO,SAAS,OAAO,CAAC,uBAAuB;AACjD;AAEA,MAAM,eAAe;IACnB;IACA;IACA;IACA;IACA;IACA;CACD;AACD,MAAM,cAAc;IAAC;CAAS;AAC9B,MAAM,kBAAkB;IAAC;CAAW;AAE7B,SAAS,WAAW,OAAoB;IAC7C,iBAAiB;IACjB,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IAEzC,aAAa;IACb,MAAM,eAAe,IAAA,yMAAgB,EAAC;QACpC,SAAS;YAAC;YAAM;YAAM;SAAK;QAC3B,eAAe;IACjB,GAAG;IAEH,MAAM,YAAY,aAAa;IAE/B,SAAS;IACT,IACE,aAAa,IAAI,CAAC,CAAC,IAAM,cAAc,KAAK,UAAU,UAAU,CAAC,IAAI,OACrE;QACA,OAAO,cAAc,yBAAyB;IAChD;IAEA,cAAc;IACd,IAAI,YAAY,IAAI,CAAC,CAAC,IAAM,UAAU,UAAU,CAAC,KAAK;QACpD,MAAM,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,cAAc;QAC/C,IAAI,SAAS,SAAS;YACpB,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;QACvD;IACF;IAEA,kBAAkB;IAClB,IAAI,gBAAgB,IAAI,CAAC,CAAC,IAAM,UAAU,UAAU,CAAC,KAAK;QACxD,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,eAAe;QACjD,IAAI,CAAC,OAAO;YACV,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,eAAe,QAAQ,GAAG;QACjE;IACF;IAEA,OAAO,cAAc,yBAAyB;AAChD;AAEO,MAAM,SAAS;IACpB,SAAS;AACX"}}]
}